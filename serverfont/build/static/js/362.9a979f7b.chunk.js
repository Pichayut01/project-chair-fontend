(self.webpackChunkweb_app_chair=self.webpackChunkweb_app_chair||[]).push([[362],{362:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>f});var o=s(555),r=s(43),i=s(823),a=s(879),n=s(722),l=s(64),c=s.n(l),u=s(743),g=s.n(u),d=s(981),m=s(579);const h="http://localhost:5000/api/auth",p=g()(c()),f=e=>{let{onLoginSuccess:t}=e;const[s,l]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[x,j]=(0,r.useState)(!1);(0,d.Zp)();return(0,m.jsx)("main",{className:"login-main",children:(0,m.jsxs)("div",{className:"login-container",children:[(0,m.jsxs)("div",{className:"form-wrapper",children:[(0,m.jsxs)("div",{className:"form-header",children:[(0,m.jsx)("button",{onClick:()=>j(!1),className:x?"":"active",children:"Login"}),(0,m.jsx)("button",{onClick:()=>j(!0),className:x?"active":"",children:"Register"})]}),x?(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await n.A.post("".concat(h,"/register"),{email:s,password:c,displayName:g}),{token:r,user:i}=e.data;localStorage.setItem("authToken",r),localStorage.setItem("userProfile",JSON.stringify(i)),p.fire({title:"Success!",text:"Registration successful. You are now logged in.",icon:"success",timer:1500,showConfirmButton:!1}).then(()=>{t((0,o.A)((0,o.A)({},i),{},{token:r}))})}catch(r){console.error("Manual registration error:",r),p.fire({title:"Error!",text:r.response.data.msg||"Registration failed.",icon:"error"})}},className:"login-form",children:[(0,m.jsx)("h2",{children:"Register"}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"registerDisplayName",children:"Display Name"}),(0,m.jsx)("input",{type:"text",id:"registerDisplayName",value:g,onChange:e=>f(e.target.value),required:!0,placeholder:"Your Name"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"registerEmail",children:"Email"}),(0,m.jsx)("input",{type:"email",id:"registerEmail",value:s,onChange:e=>l(e.target.value),required:!0,placeholder:"your@email.com"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"registerPassword",children:"Password"}),(0,m.jsx)("input",{type:"password",id:"registerPassword",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"********"})]}),(0,m.jsx)("button",{type:"submit",className:"submit-button",children:"Register"})]}):(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await n.A.post("".concat(h,"/login"),{email:s,password:c}),{token:r,user:i}=e.data;localStorage.setItem("authToken",r),localStorage.setItem("userProfile",JSON.stringify(i)),p.fire({title:"Success!",text:"Login successful.",icon:"success",timer:1500,showConfirmButton:!1}).then(()=>{t((0,o.A)((0,o.A)({},i),{},{token:r}))})}catch(r){console.error("Manual login error:",r),p.fire({title:"Error!",text:r.response.data.msg||"Invalid email or password.",icon:"error"})}},className:"login-form",children:[(0,m.jsx)("h2",{children:"Login"}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"loginEmail",children:"Email"}),(0,m.jsx)("input",{type:"email",id:"loginEmail",value:s,onChange:e=>l(e.target.value),required:!0,placeholder:"your@email.com"})]}),(0,m.jsxs)("div",{className:"form-group",children:[(0,m.jsx)("label",{htmlFor:"loginPassword",children:"Password"}),(0,m.jsx)("input",{type:"password",id:"loginPassword",value:c,onChange:e=>u(e.target.value),required:!0,placeholder:"********"})]}),(0,m.jsx)("button",{type:"submit",className:"submit-button",children:"Login"})]})]}),(0,m.jsx)("div",{className:"divider",children:(0,m.jsx)("span",{children:"OR"})}),(0,m.jsx)("div",{className:"google-login",children:(0,m.jsxs)("button",{onClick:async()=>{const e=new i.HF;try{const s=(await(0,i.df)(a.j,e)).user,r=await s.getIdToken(),l=await n.A.post("".concat(h,"/google-login-verify"),{idToken:r}),{token:c,user:u}=l.data;localStorage.setItem("authToken",c),localStorage.setItem("userProfile",JSON.stringify(u)),p.fire({title:"Success!",text:"Login with Google successful.",icon:"success",timer:1500,showConfirmButton:!1}).then(()=>{t((0,o.A)((0,o.A)({},u),{},{token:c}))})}catch(s){console.error("Login with Google error:",s),p.fire({title:"Error!",text:"Failed to login with Google.",icon:"error"})}},className:"google-login-button",children:[(0,m.jsx)("img",{src:"https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_%22G%22_logo.svg",alt:"Google logo"}),"Login with Google"]})})]})})}},743:function(e,t,s){e.exports=function(e,t){"use strict";const s=[{key:"title",getter:e=>e.getTitle()},{key:"html",getter:e=>e.getHtmlContainer()},{key:"confirmButtonText",getter:e=>e.getConfirmButton()},{key:"denyButtonText",getter:e=>e.getDenyButton()},{key:"cancelButtonText",getter:e=>e.getCancelButton()},{key:"footer",getter:e=>e.getFooter()},{key:"closeButtonHtml",getter:e=>e.getCloseButton()},{key:"iconHtml",getter:e=>e.getIconContent()},{key:"loaderHtml",getter:e=>e.getLoader()}],o=()=>{};function r(r){function i(t){const o={},r={},i=s.map(e=>e.key);return Object.entries(t).forEach(t=>{let[s,a]=t;i.includes(s)&&e.isValidElement(a)?(o[s]=a,r[s]=" "):r[s]=a}),[o,r]}function a(e,o){Object.entries(o).forEach(o=>{let[i,a]=o;const n=s.find(e=>e.key===i).getter(r),l=t.createRoot(n);l.render(a),e.__roots.push(l)})}function n(e){e.__roots.forEach(e=>{e.unmount()}),e.__roots=[]}return class extends r{static argsToParams(t){if(e.isValidElement(t[0])||e.isValidElement(t[1])){const e={};return["title","html","icon"].forEach((s,o)=>{void 0!==t[o]&&(e[s]=t[o])}),e}return r.argsToParams(t)}_main(e,t){this.__roots=[],this.__params=Object.assign({},t,e);const[s,r]=i(this.__params),l=r.willOpen||o,c=r.didOpen||o,u=r.didDestroy||o;return super._main(Object.assign({},r,{willOpen:e=>{a(this,s),l(e)},didOpen:e=>{setTimeout(()=>{c(e)})},didDestroy:e=>{u(e),n(this)}}))}update(e){Object.assign(this.__params,e),n(this);const[t,s]=i(this.__params);super.update(s),a(this,t)}}}return r}(s(43),s(391))}}]);
//# sourceMappingURL=362.9a979f7b.chunk.js.map