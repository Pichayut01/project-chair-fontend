"use strict";(self.webpackChunkweb_app_chair=self.webpackChunkweb_app_chair||[]).push([[142],{11:()=>{},109:()=>{},192:()=>{},200:(e,s,a)=>{e.exports=a.p+"static/media/nulluser.838b2604657754be4cd6.png"},459:(e,s,a)=>{a.d(s,{A:()=>o});var n=a(43),t=(a(11),a(579));const o=e=>{let{id:s,initialPosition:a,onChairMove:o,containerRef:i,isDraggable:l,userPhotoURL:r,userName:c,onChairClick:d}=e;const[m,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(a),x=(0,n.useRef)({x:0,y:0}),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{p(a)},[a]);const v=(0,n.useCallback)(e=>{if(!l||!j.current)return;u(!0);const s=j.current.getBoundingClientRect();x.current={x:e.clientX-s.left,y:e.clientY-s.top}},[l]),b=(0,n.useCallback)(e=>{if(!m||!i.current||!j.current)return;const s=i.current.getBoundingClientRect(),a=j.current.getBoundingClientRect();let n=e.clientX-s.left-x.current.x,t=e.clientY-s.top-x.current.y;n=Math.max(0,Math.min(n,s.width-a.width)),t=Math.max(0,Math.min(t,s.height-a.height)),p({x:n,y:t})},[m,i]),g=(0,n.useCallback)(()=>{m&&(u(!1),o(s,h.x,h.y))},[m,o,s,h]);(0,n.useEffect)(()=>(m?(window.addEventListener("mousemove",b),window.addEventListener("mouseup",g)):(window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",b),window.removeEventListener("mouseup",g)}),[m,b,g]);const C=(0,n.useCallback)(()=>{d&&!l&&d(s)},[s,l,d]);return(0,t.jsxs)("div",{ref:j,className:"chair-item",style:{left:h.x+"px",top:h.y+"px",zIndex:m?1e3:1},onMouseDown:v,onClick:C,children:[(0,t.jsx)("div",{className:"chair-icon",style:{backgroundImage:r?"url(".concat(r,")"):"none"},children:!r&&(0,t.jsx)("div",{className:"chair-icon-placeholder"})}),(0,t.jsx)("div",{className:"user-name-under",children:c||""})]})}},485:(e,s,a)=>{a.d(s,{A:()=>h});var n=a(43);a(109);const t=a.p+"static/media/icon.88f7cef4fa136df22b4e.ico";var o=a(200),i=a(819),l=a(184),r=a(981),c=a(64),d=a.n(c),m=a(579);const u={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_API_BASE_URL||"http://localhost:5000",h=e=>{var s;let{isSidebarOpen:a,toggleSidebar:c,user:h,handleSignOut:p,onClassActionClick:x,classrooms:j,isClassroomPage:v,onShareClick:b,classroomMembers:g,isAccountSettingPage:C,onPromoteMember:f,onKickMember:N,onDemoteMember:w,classroom:k,isCreator:y,isEditing:S,onToggleEditMode:_,onSavePositions:P,onCancelEdit:E,userSeatId:R,onLeaveSeat:L}=e;const A=(0,r.Zp)(),[B,U]=(0,n.useState)(!1),M=e=>{e.target.onerror=null,e.target.src=o,console.warn("Navbar profile image failed to load, falling back to placeholder:",e.target.src)},T=()=>{A(-1)},O={whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%",display:"block"},D=e=>{g.creator.some(s=>s._id===e._id)?d().fire({title:e.displayName,showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Demote to Participant",denyButtonText:"Kick",cancelButtonText:"Cancel",icon:"info",confirmButtonColor:"#e74c3c"}).then(async s=>{s.isConfirmed?await w(e._id,e.displayName):s.isDenied&&await N(e._id,e.displayName)}):d().fire({title:e.displayName,showDenyButton:!0,showCancelButton:!0,confirmButtonText:"Promote to Creator",denyButtonText:"Kick",cancelButtonText:"Cancel",icon:"info"}).then(async s=>{s.isConfirmed?await f(e._id,e.displayName):s.isDenied&&await N(e._id,e.displayName)})};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("nav",{className:"navbar",children:[(0,m.jsxs)("div",{className:"navbar__logo",children:[(0,m.jsx)("button",{className:"navbar__burger",onClick:c,children:"\u2630"}),(0,m.jsx)("img",{src:t,alt:"Logo",className:"navbar__logo-image"}),(0,m.jsx)("h1",{style:{color:"#414141ff",fontSize:"24px"},children:"Chair"})]}),(0,m.jsx)("div",{className:"navbar-center",children:v&&y&&(S?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("button",{className:"navbar-action-button save",onClick:P,title:"Save Seating",children:[(0,m.jsx)(i.Bc_,{size:20}),(0,m.jsx)("span",{children:"Save"})]}),(0,m.jsxs)("button",{className:"navbar-action-button cancel",onClick:E,title:"Cancel",children:[(0,m.jsx)(i.yGN,{size:20}),(0,m.jsx)("span",{children:"Cancel"})]})]}):(0,m.jsxs)("button",{className:"navbar-action-button",onClick:_,title:"Edit Seating",children:[(0,m.jsx)(i.WXf,{size:20}),(0,m.jsx)("span",{children:"Edit"})]}))}),(0,m.jsxs)("div",{className:"navbar__profile",onClick:()=>{U(!B)},children:[h?(0,m.jsx)("img",{src:h.photoURL?"".concat(u).concat(h.photoURL):o,alt:"User Profile",className:"navbar-profile-image",onError:M}):(0,m.jsx)("button",{onClick:()=>{A("/login")},className:"navbar__signin-button",children:"Sign In"}),B&&h&&(0,m.jsxs)("div",{className:"dropdown-menu",children:[(0,m.jsxs)("div",{className:"dropdown-user-info",children:[(0,m.jsx)("img",{src:h.photoURL?"".concat(u).concat(h.photoURL):o,alt:"User Profile",className:"dropdown-profile-image",onError:M}),(0,m.jsxs)("div",{className:"user-details",children:[(0,m.jsx)("span",{className:"user-name",children:h.displayName}),(0,m.jsx)("br",{}),(0,m.jsx)("span",{className:"user-email",children:h.email})]})]}),(0,m.jsx)("hr",{style:{border:"none",height:"1px",backgroundColor:"#dadce0",margin:"8px 0"}}),(0,m.jsxs)("div",{className:"dropdown-list",children:[(0,m.jsx)("span",{className:"dropdown-item",onClick:()=>{A("/account-setting"),U(!1)},children:"Account Setting"}),(0,m.jsxs)("span",{className:"dropdown-item",onClick:async()=>{await p(),U(!1),window.location.reload()},children:[(0,m.jsx)(i.QeK,{}),"Sign Out"]})]})]})]})]}),(0,m.jsx)("aside",{className:"sidebar ".concat(a?"open":""),children:(0,m.jsx)("ul",{className:"sidebar-list",children:C?(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-back-button",onClick:T,children:[(0,m.jsx)(i.kRp,{size:18}),(0,m.jsx)("span",{children:"Back"})]}):v?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-back-button",onClick:T,children:[(0,m.jsx)(i.kRp,{size:18}),(0,m.jsx)("span",{children:"Back"})]}),h&&(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-share-class",onClick:b,children:[(0,m.jsx)(i.Pum,{size:18}),(0,m.jsx)("span",{children:"Share Class"})]}),(null===g||void 0===g?void 0:g.creator)&&g.creator.length>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("hr",{className:"divider",style:{margin:"8px 0"}}),(0,m.jsxs)("h3",{className:"sidebar-section-title",children:["Creator (",g.creator.length,")"]}),g.creator.map(e=>(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-member-item",children:[(0,m.jsx)("img",{src:e.photoURL?"".concat(u).concat(e.photoURL):o,alt:e.displayName,onError:M,className:"sidebar-profile-image"}),(0,m.jsx)("span",{style:O,children:e.displayName}),y&&h.id!==e._id&&(0,m.jsx)("button",{className:"menu-btn",onClick:()=>D(e),title:"Member options",children:(0,m.jsx)(l.Pcn,{})})]},e._id))]}),(null===g||void 0===g||null===(s=g.participants)||void 0===s?void 0:s.length)>0&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("hr",{className:"divider",style:{margin:"8px 0"}}),(0,m.jsxs)("h3",{className:"sidebar-section-title",children:["Participants (",g.participants.filter(e=>!g.creator.some(s=>s._id===e._id)).length,")"]}),g.participants.filter(e=>!g.creator.some(s=>s._id===e._id)).map(e=>(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-member-item",children:[(0,m.jsx)("img",{src:e.photoURL?"".concat(u).concat(e.photoURL):o,alt:e.displayName,onError:M,className:"sidebar-profile-image"}),(0,m.jsx)("span",{style:O,children:e.displayName}),y&&h.id!==e._id&&(0,m.jsx)("button",{className:"menu-btn",onClick:()=>D(e),title:"Member options",children:(0,m.jsx)(l.Pcn,{})})]},e._id))]}),v&&R&&(0,m.jsx)("button",{className:"leave-seat-btn",style:{width:"90%",margin:"20px auto 10px auto",display:"block",background:"#f44336",color:"#fff",border:"none",borderRadius:"6px",padding:"10px 0",fontWeight:"bold",cursor:"pointer"},onClick:L,children:"Leave Seat"})]}):(0,m.jsxs)(m.Fragment,{children:[h&&(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-create-class",onClick:x,children:[(0,m.jsx)(i.GGD,{size:18}),(0,m.jsx)("span",{children:"Class"})]}),(0,m.jsx)("hr",{style:{border:"none",height:"1px",backgroundColor:"#dadce0",margin:"8px 0"}}),j.length>0?j.map(e=>{var s;return(0,m.jsxs)("li",{className:"sidebar-list-item sidebar-classroom-item",onClick:()=>{return s=e._id,A("/classroom/".concat(s)),void c();var s},children:[(0,m.jsx)("img",{src:null!==(s=e.creator)&&void 0!==s&&s.photoURL?"".concat(u).concat(e.creator.photoURL):o,alt:"Creator Profile",className:"sidebar-profile-image"}),(0,m.jsx)("span",{className:"sidebar-classroom-name",children:e.name})]},e._id)}):(0,m.jsx)("li",{className:"sidebar-no-class-text",children:"No classes joined."})]})})})]})}},651:(e,s,a)=>{a.r(s),a.d(s,{default:()=>f});var n=a(43),t=a(722),o=a(485),i=a(981),l=(a(192),a(200)),r=a(819),c=a(184),d=a(64),m=a.n(d),u=a(579);const h=e=>{let{isSidebarOpen:s,classrooms:a,user:t,onPinClass:o,setShowMenu:d,showMenu:h,handleLeaveClassroom:p}=e;const[x,j]=(0,n.useState)(null),v=(0,i.Zp)(),b=e=>{e.target.onerror=null,e.target.src=l},g=e=>(0,u.jsx)("div",{className:"classroom-grid",children:e.map(e=>{var s,a;const n=null===(s=t.pinnedClasses)||void 0===s?void 0:s.includes(e._id);return(0,u.jsxs)("div",{className:"classroom-card ".concat(x===e._id?"active-dropdown":""),style:{borderLeftColor:e.color},onClick:()=>{return s=e._id,void v("/classroom/".concat(s));var s},children:[(0,u.jsxs)("div",{className:"classroom-options-wrapper",children:[(0,u.jsx)("div",{className:"classroom-options-icon",onClick:s=>((e,s)=>{s.stopPropagation(),j(x===e?null:e)})(e._id,s),children:"\u22ee"}),x===e._id&&(0,u.jsxs)("div",{className:"dropdown-menu",onClick:e=>e.stopPropagation(),children:[(0,u.jsxs)("div",{className:"dropdown-item",onClick:()=>o(e._id),children:[(0,u.jsx)(c.LBY,{size:16}),(0,u.jsx)("span",{children:n?"Unpin class":"Pin class"})]}),(0,u.jsxs)("div",{className:"dropdown-item",onClick:s=>((e,s)=>{s.stopPropagation(),j(null),m().fire({title:"Class Code",html:'\n                <div style="background-color: #eaf6ea; border: 1px solid #d4ecd4; border-radius: 4px; padding: 12px 15px; font-size: 24px; font-weight: bold; color: #388e3c; word-break: break-all; margin: 15px 0;">\n                    '.concat(e,"\n                </div>"),showCancelButton:!0,confirmButtonText:"Copy Code",cancelButtonText:"Close",customClass:{confirmButton:"swal2-confirm"}}).then(s=>{s.isConfirmed&&(navigator.clipboard.writeText(e),m().fire("Copied!","Class code has been copied to clipboard.","success"))})})(e.classCode,s),children:[(0,u.jsx)(r.Pum,{size:16}),(0,u.jsx)("span",{children:"Share Class Code"})]}),(0,u.jsx)("div",{className:"dropdown-item",style:{color:"red"},onClick:s=>{s.stopPropagation(),p(e._id),j(null)},children:(0,u.jsx)("span",{children:"\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e2b\u0e49\u0e2d\u0e07"})})]})]}),(0,u.jsxs)("div",{className:"classroom-text-content",children:[(0,u.jsx)("h2",{children:e.name}),(0,u.jsx)("h3",{className:"classroom-subname",children:e.subname})]}),(0,u.jsx)("div",{className:"classroom-image-container",children:(0,u.jsx)("img",{src:null!==(a=e.creator)&&void 0!==a&&a.photoURL?"".concat("http://localhost:5000").concat(e.creator.photoURL):l,alt:"".concat(e.name," owner profile"),className:"classroom-image",onError:b})})]},e._id)})}),C=a.filter(e=>{var s;return null===(s=t.pinnedClasses)||void 0===s?void 0:s.includes(e._id)}),f=a.filter(e=>{var s,a;return(null===(s=t.createdClasses)||void 0===s?void 0:s.includes(e._id))&&!(null!==(a=t.pinnedClasses)&&void 0!==a&&a.includes(e._id))}),N=a.filter(e=>{var s,a,n;return(null===(s=t.enrolledClasses)||void 0===s?void 0:s.includes(e._id))&&!(null!==(a=t.createdClasses)&&void 0!==a&&a.includes(e._id))&&!(null!==(n=t.pinnedClasses)&&void 0!==n&&n.includes(e._id))});return(0,u.jsx)("main",{className:"main__content ".concat(s?"shift":""),children:(0,u.jsxs)("div",{className:"main-content-scrollable-area",children:[C.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:"section-title",children:"Pinned Classrooms"}),g(C),(0,u.jsx)("hr",{className:"divider"})]}),f.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:"section-title",children:"Created by You"}),g(f),(0,u.jsx)("hr",{className:"divider"})]}),N.length>0&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("h2",{className:"section-title",children:"Joined Classrooms"}),g(N)]})]})})};var p=a(555),x=(a(11),a(459));const j=e=>{let{rows:s,cols:a,onClose:t,onSavePositions:o,initialSavedPositions:i}=e;const[l,r]=(0,n.useState)({}),c=(0,n.useRef)(null),d=(0,n.useCallback)(e=>{const n={};if(!e||0===a||0===s)return n;const t=e/a,o=(t-.8*t)/2;let i=0;for(let l=0;l<s;l++)for(let e=0;e<a;e++)n["seat-".concat(i)]={x:e*t+o,y:20+80*l},i++;return n},[s,a]);(0,n.useEffect)(()=>{if(!(Object.keys(i).length>0)){const e=setTimeout(()=>{if(c.current){const e=c.current.clientWidth;e&&r(d(e))}},0);return()=>clearTimeout(e)}r(i)},[i,d]),(0,n.useEffect)(()=>{const e=()=>{if(c.current){const e=c.current.clientWidth;e&&r(d(e))}};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[d]);const m=(0,n.useCallback)((e,s,a)=>{r(n=>(0,p.A)((0,p.A)({},n),{},{[e]:{x:s,y:a}}))},[]);return(0,u.jsx)("div",{className:"modal-backdrop",children:(0,u.jsxs)("div",{className:"modal-content preview-modal",children:[(0,u.jsx)("button",{className:"modal-close-button",onClick:t,children:"\xd7"}),(0,u.jsx)("h2",{children:"Seating Arrangement Preview"}),(0,u.jsx)("div",{className:"seating-area",children:(0,u.jsx)("div",{ref:c,className:"seating-grid",style:{width:"1600px",height:"1200px",position:"relative"},children:Object.entries(l).map(e=>{let[s,a]=e;return(0,u.jsx)(x.A,{id:s,initialPosition:a,onChairMove:m,isDraggable:!0,containerRef:c},s)})})}),(0,u.jsx)("button",{className:"modal-action-button",onClick:()=>{o(l),t()},children:"Save Seating Arrangement"})]})})},v=e=>{let{onClose:s,onClassCreated:a,user:t}=e;const[o,i]=(0,n.useState)(""),[l,r]=(0,n.useState)(""),[c,d]=(0,n.useState)("#4CAF50"),[m,h]=(0,n.useState)(0),[p,x]=(0,n.useState)(0),[v,b]=(0,n.useState)(!1),[g,C]=(0,n.useState)({}),f=(0,n.useCallback)(()=>{const e={};let s=0;for(let a=0;a<m;a++)for(let n=0;n<p;n++)e["seat-".concat(s)]={x:20+80*n,y:20+80*a},s++;return e},[m,p]);return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("div",{className:"modal-backdrop",children:(0,u.jsxs)("div",{className:"modal-content",children:[(0,u.jsx)("button",{className:"modal-close-button",onClick:s,children:"\xd7"}),(0,u.jsx)("h2",{children:"Create New Class"}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!t||!t.token)return console.error("User or token is not available. Cannot create class."),void alert("Please log in to create a class.");if(m<0||m>10||p<0||p>10)return void alert("Rows and columns must be between 0 and 10.");let s=g;0===Object.keys(s).length&&m>0&&p>0&&(s=f());try{const e=await fetch("http://localhost:5000/api/classrooms/create",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":t.token},body:JSON.stringify({name:o,subname:l,color:c,imageUrl:"https://via.placeholder.com/50",rows:m,cols:p,seatingPositions:s})});if(!e.ok){const s=await e.json();throw new Error(s.msg||"Failed to create class")}const n=await e.json();console.log("Class created:",n.class),a()}catch(n){alert(n.message)}},children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Class Name"}),(0,u.jsx)("input",{type:"text",value:o,onChange:e=>i(e.target.value),required:!0})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Subject Name"}),(0,u.jsx)("input",{type:"text",value:l,onChange:e=>r(e.target.value)})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Class Color"}),(0,u.jsx)("input",{type:"color",value:c,onChange:e=>d(e.target.value)})]}),(0,u.jsxs)("div",{className:"form-group-inline",children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Rows (1-10)"}),(0,u.jsx)("input",{type:"number",min:"0",max:"10",value:m,onChange:e=>h(Math.min(10,Math.max(0,parseInt(e.target.value)||0)))})]}),(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Columns (1-10)"}),(0,u.jsx)("input",{type:"number",min:"0",max:"10",value:p,onChange:e=>x(Math.min(10,Math.max(0,parseInt(e.target.value)||0)))})]})]}),(0,u.jsx)("div",{className:"form-group",children:(0,u.jsx)("button",{type:"button",className:"modal-preview-button",onClick:e=>{e.preventDefault(),m>0&&p>0&&m<=10&&p<=10?b(!0):alert("Please enter valid numbers for rows and columns (1-10) to preview.")},children:"Preview Seating"})}),(0,u.jsx)("button",{type:"submit",className:"modal-action-button",children:"Create Class"})]})]})}),v&&(0,u.jsx)(j,{rows:m,cols:p,onClose:()=>b(!1),onSavePositions:e=>{C(e),console.log("Saved seating positions:",e)},initialSavedPositions:g})]})},b=e=>{let{onClose:s,onClassJoined:a,user:o}=e;const[i,l]=(0,n.useState)(""),[r,c]=(0,n.useState)("");return(0,u.jsx)("div",{className:"modal-backdrop",children:(0,u.jsxs)("div",{className:"modal-content",children:[(0,u.jsx)("button",{className:"modal-close-button",onClick:s,children:"\xd7"}),(0,u.jsx)("h2",{children:"Join Class"}),(0,u.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),o&&o.token)try{await t.A.post("http://localhost:5000/api/classrooms/join",{classCode:i},{headers:{"x-auth-token":o.token}}),a(),s()}catch(r){var n,l;console.error("Error joining class:",r),c((null===(n=r.response)||void 0===n||null===(l=n.data)||void 0===l?void 0:l.msg)||"Failed to join class. Please check the code.")}else c("Please log in to join a class.")},children:[(0,u.jsxs)("div",{className:"form-group",children:[(0,u.jsx)("label",{children:"Class Code"}),(0,u.jsx)("input",{type:"text",value:i,onChange:e=>l(e.target.value.toUpperCase()),required:!0})]}),r&&(0,u.jsx)("p",{className:"error-message",children:r}),(0,u.jsx)("button",{type:"submit",className:"modal-action-button",children:"Join"})]})]})})},g=e=>{let{onClose:s,onClassCreated:a,onClassJoined:t,user:o}=e;const[i,l]=(0,n.useState)(null);return"create"===i?(0,u.jsx)(v,{onClose:s,onClassCreated:a,user:o}):"join"===i?(0,u.jsx)(b,{onClose:s,onClassJoined:t,user:o}):(0,u.jsx)("div",{className:"modal-backdrop",children:(0,u.jsxs)("div",{className:"modal-content",children:[(0,u.jsx)("button",{className:"modal-close-button",onClick:s,children:"\xd7"}),(0,u.jsxs)("div",{className:"modal-options",children:[(0,u.jsxs)("button",{className:"modal-option-button",onClick:()=>{l("create")},children:[(0,u.jsx)("i",{className:"fa-solid fa-plus icon"}),(0,u.jsx)("span",{children:"Create class"})]}),(0,u.jsxs)("button",{className:"modal-option-button",onClick:()=>{l("join")},children:[(0,u.jsx)("i",{className:"fa-solid fa-user-plus icon"}),(0,u.jsx)("span",{children:"Join class"})]})]})]})})},C="http://localhost:5000",f=e=>{let{user:s,updateUserProfile:a,isSidebarOpen:i,toggleSidebar:l,handleSignOut:r}=e;const[c,d]=(0,n.useState)([]),[m,p]=(0,n.useState)(!1),[x,j]=(0,n.useState)(null),v=async e=>{try{return(await t.A.get("".concat(C,"/api/classrooms"),{headers:{"x-auth-token":e}})).data}catch(s){return console.error("Error fetching classrooms:",s),[]}},b=async e=>{try{return(await t.A.get("".concat(C,"/api/auth/me"),{headers:{"x-auth-token":e}})).data}catch(s){return console.error("Error fetching user profile:",s),null}},f=(0,n.useCallback)(async()=>{if(s&&s.token){const[e,n]=await Promise.all([v(s.token),b(s.token)]);d(e),n&&a(n)}},[s,a]);(0,n.useEffect)(()=>{f()},[f]);const N=()=>{p(!1)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.A,{isSidebarOpen:i,toggleSidebar:l,user:s,onClassActionClick:()=>{p(!0)},classrooms:c,handleSignOut:r}),(0,u.jsx)(h,{isSidebarOpen:i,classrooms:c,user:s,updateUserProfile:a,onPinClass:async e=>{try{await t.A.post("".concat(C,"/api/classrooms/").concat(e,"/toggle-pin"),null,{headers:{"x-auth-token":s.token}}),f()}catch(a){console.error("Error pinning/unpinning class:",a)}},setShowMenu:j,showMenu:x,handleLeaveClassroom:async e=>{if(window.confirm("\u0e04\u0e38\u0e13\u0e15\u0e49\u0e2d\u0e07\u0e01\u0e32\u0e23\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e2b\u0e49\u0e2d\u0e07\u0e19\u0e35\u0e49\u0e43\u0e0a\u0e48\u0e2b\u0e23\u0e37\u0e2d\u0e44\u0e21\u0e48?"))try{await t.A.post("".concat(C,"/api/classrooms/").concat(e,"/leave"),{},{headers:{"x-auth-token":s.token}}),v()}catch(a){alert("\u0e2d\u0e2d\u0e01\u0e08\u0e32\u0e01\u0e2b\u0e49\u0e2d\u0e07\u0e44\u0e21\u0e48\u0e2a\u0e33\u0e40\u0e23\u0e47\u0e08")}}}),m&&(0,u.jsx)(g,{onClose:N,onClassCreated:async()=>{await f(),N()},onClassJoined:async()=>{await f(),N()},user:s})]})}}}]);
//# sourceMappingURL=142.b2f7b035.chunk.js.map